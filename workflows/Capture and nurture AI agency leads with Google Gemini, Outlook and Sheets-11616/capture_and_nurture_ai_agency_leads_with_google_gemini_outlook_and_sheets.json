{"id":"nIa9PqV9tpWRuqNK","meta":{"instanceId":"f6e8ad6763839b50a3ab3bea5512dc60976f81a6273178925f946fc7a00549a8"},"name":"AI Agent Outbound + Follow-up","tags":[],"nodes":[{"id":"07144f2c-47fb-4865-b4bc-888839711e21","name":"Property Photo Upload Form","type":"n8n-nodes-base.formTrigger","position":[1120,1408],"webhookId":"0bb63413-72e2-46e7-9fd4-c88c72b48883","parameters":{"options":{"path":"magic-editor","appendAttribution":false},"formTitle":"Magic Editor","formFields":{"values":[{"fieldType":"file","fieldLabel":"Image","multipleFiles":false,"requiredField":true},{"fieldLabel":"Description:","placeholder":"What do you want changed?","requiredField":true},{"fieldLabel":"Email:","placeholder":"Email Here","requiredField":true},{"fieldLabel":"Name","placeholder":"Your Name Here","requiredField":true},{"fieldLabel":"Company Name?","placeholder":"Example Company LLC","requiredField":true}]},"formDescription":"Upload any image and specify what you want to be changed, and within seconds receive it in an email!"},"typeVersion":2.3},{"id":"527d5f40-cf84-48ee-8555-a3b406478a7e","name":"Edit an image","type":"@n8n/n8n-nodes-langchain.googleGemini","position":[1344,1600],"parameters":{"images":{"values":[{"binaryPropertyName":"Image"}]},"prompt":"=BASED OFF OF THIS DESCRIPTION, EDIT THE IMAGE: {{ $json['Description:'] }}\n\nKEEP CAMERA ANGLE AND LIGHTING THE SAME UNLESS SPECIFIED ABOVE","options":{},"resource":"image","operation":"edit"},"credentials":{"googlePalmApi":{"id":"credential-id","name":"googlePalmApi Credential"}},"typeVersion":1},{"id":"e8ae0636-3798-4fd0-bbac-b248dd1a9e7c","name":"Send a message","type":"n8n-nodes-base.microsoftOutlook","position":[1632,1600],"webhookId":"0c360b67-9c80-4f1f-b1e8-5c1eec3e9819","parameters":{"subject":"Image Is ready!","bodyContent":"=Hey {{ $('Property Photo Upload Form').item.json.Name }}!\n\nThanks for using our Magic Editor, your image is linked below.\n\nLet us know how we did or any other projects you may be intrested in.\n\nLooking forward to working with you and {{ $('Property Photo Upload Form').item.json['Company Name?'] }} in the future!\n\nBest Wishes,\n\nHyrum Hurst\nQuarterSmart AI","toRecipients":"={{ $('Property Photo Upload Form').item.json['Email:'] }}","additionalFields":{"attachments":{"attachments":[{"binaryPropertyName":"edited"}]}}},"credentials":{"microsoftOutlookOAuth2Api":{"id":"credential-id","name":"microsoftOutlookOAuth2Api Credential"}},"typeVersion":2},{"id":"cb04d229-ed13-4b05-8953-cd1be7cf865d","name":"Append or update row in sheet","type":"n8n-nodes-base.googleSheets","position":[1344,1408],"parameters":{"columns":{"value":{"Name":"={{ $('Property Photo Upload Form').item.json.Name }}","Time":"={{ $('Property Photo Upload Form').item.json.submittedAt }}","Email":"={{ $('Property Photo Upload Form').item.json['Email:'] }}","Company":"={{ $('Property Photo Upload Form').item.json['Company Name?'] }}"},"schema":[{"id":"Name","type":"string","display":true,"removed":false,"required":false,"displayName":"Name","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Company","type":"string","display":true,"required":false,"displayName":"Company","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Email","type":"string","display":true,"required":false,"displayName":"Email","defaultMatch":false,"canBeUsedToMatch":true},{"id":"Time","type":"string","display":true,"removed":false,"required":false,"displayName":"Time","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["Name"],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{},"operation":"appendOrUpdate","sheetName":{"__rl":true,"mode":"list","value":"gid=0","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1bxEOqa0OXL-v6806-Fm9lnsXttsqgX9LGq42QtZWbc8/edit#gid=0","cachedResultName":"Sheet1"},"documentId":{"__rl":true,"mode":"list","value":"1bxEOqa0OXL-v6806-Fm9lnsXttsqgX9LGq42QtZWbc8","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1bxEOqa0OXL-v6806-Fm9lnsXttsqgX9LGq42QtZWbc8/edit?usp=drivesdk","cachedResultName":"Warm Leads"}},"credentials":{"googleSheetsOAuth2Api":{"id":"credential-id","name":"googleSheetsOAuth2Api Credential"}},"typeVersion":4.7},{"id":"1519d7b7-c99b-467f-bca8-3016b72aa48e","name":"Automation Ideas Library","type":"n8n-nodes-base.set","position":[1344,1216],"parameters":{"options":{},"assignments":{"assignments":[{"id":"id-1","name":"automationIdeas","type":"string","value":"Auto-qualify inbound leads and send personalized follow-ups\nMissed-call automation that texts customers instantly\nInvoice follow-up system that reduces late payments\nAI email responder for website contact forms\nLead routing + calendar booking automation"},{"id":"id-2","name":"name","type":"string","value":"={{ $json.Name }}"},{"id":"id-3","name":"email","type":"string","value":"={{ $json['Email:'] }}"},{"id":"id-4","name":"company","type":"string","value":"={{ $json['Company Name?'] }}"}]},"includeOtherFields":true},"typeVersion":3.4},{"id":"cc4443e6-8d2a-4536-b4c7-1575bb3cbcc5","name":"AI Sales Agent - Idea Picker & Email Writer","type":"@n8n/n8n-nodes-langchain.agent","position":[1568,1104],"parameters":{"text":"=Company Name: {{ $json.company }}\nContact Name: {{ $json.name }}\n\nAutomation Ideas:\n{{ $json.automationIdeas }}","options":{"systemMessage":"You are an AI sales engineer.\n\nYour task:\n1. Analyze the company name and context.\n2. Either select ONE automation idea from the list provided OR create a very simple custom one.\n3. Write a short, confident email saying:\n   - This automation is already built\n   - We can help implement it for them\n   - Include a call-to-action to book a call\n\nConstraints:\n- Keep it under 150 words\n- Sound casual but professional\n- Do NOT sound like marketing copy\n- Be specific about the automation chosen\n\nReturn JSON in this format:\n{\n  \"chosenIdea\": \"the automation idea you selected or created\",\n  \"emailBody\": \"the complete email text\"\n}"},"promptType":"define","hasOutputParser":true},"typeVersion":3},{"id":"cd7acb1f-d316-47e7-bb3b-163d577e7f55","name":"Structured Output Parser","type":"@n8n/n8n-nodes-langchain.outputParserStructured","position":[1696,1328],"parameters":{"schemaType":"manual","inputSchema":"{\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"chosenIdea\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"description\": \"The automation idea selected or created\"\n\t\t},\n\t\t\"emailBody\": {\n\t\t\t\"type\": \"string\",\n\t\t\t\"description\": \"The complete personalized email text\"\n\t\t}\n\t}\n}"},"typeVersion":1.3},{"id":"177ebb56-728c-4c67-a946-6704e794607c","name":"Parse AI Output","type":"n8n-nodes-base.code","position":[1920,1216],"parameters":{"jsCode":"const output = $input.first().json.output;\nreturn [{\n  json: {\n    chosenIdea: output.chosenIdea,\n    emailBody: output.emailBody,\n    name: $('Automation Ideas Library').first().json.name,\n    email: $('Automation Ideas Library').first().json.email,\n    company: $('Automation Ideas Library').first().json.company\n  }\n}];"},"typeVersion":2},{"id":"c438a32b-f3eb-43ee-bfa0-2eaac937c59f","name":"Send Personalized Outreach Email","type":"n8n-nodes-base.microsoftOutlook","position":[2144,1216],"webhookId":"590c40bf-92c4-4dc2-a12a-1b2964952a92","parameters":{"subject":"=Quick automation idea for {{ $json.company }}","bodyContent":"=Hey {{ $json.name }},\n\n{{ $json.emailBody }}\n\nYou can grab time here if it makes sense:\nhttps://cal.com/quartersmart/intro\n\nâ€“ Hyrum\nQuarterSmart AI","toRecipients":"={{ $json.email }}","additionalFields":{}},"credentials":{"microsoftOutlookOAuth2Api":{"id":"credential-id","name":"microsoftOutlookOAuth2Api Credential"}},"typeVersion":2},{"id":"012cee49-a708-4586-a6e5-20a870cc9f3a","name":"Wait 48 Hours","type":"n8n-nodes-base.wait","position":[2368,1216],"webhookId":"4812764f-9b55-4fa6-992f-ac78040a8803","parameters":{"unit":"hours","amount":48},"typeVersion":1.1},{"id":"65b00636-fd3d-489e-ba52-cb4f70d59898","name":"AI Follow-up Email Writer","type":"@n8n/n8n-nodes-langchain.agent","position":[3040,960],"parameters":{"text":"=Company: {{ $json.company }}\nName: {{ $json.name }}\nOriginal Idea: {{ $json.chosenIdea }}","options":{"systemMessage":"Write a short, polite follow-up email.\n\nContext:\n- They received an automation idea\n- They haven't replied\n- This is NOT pushy\n\nMax 60 words.\n\nReturn ONLY the email body text, no subject line."},"promptType":"define"},"typeVersion":3},{"id":"a927fdb7-5ff9-46ae-8e4f-360233f08f18","name":"Google Gemini Chat Model1","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[3104,1184],"parameters":{"options":{}},"credentials":{"googlePalmApi":{"id":"credential-id","name":"googlePalmApi Credential"}},"typeVersion":1},{"id":"f06158f7-1bf0-4c50-8231-a66935a357d4","name":"Send Follow-up Email","type":"n8n-nodes-base.microsoftOutlook","position":[3392,1056],"webhookId":"e4e8b3d8-fff2-4c89-b8ee-84f32df10c1b","parameters":{"subject":"=Re: Quick automation idea for {{ $json.company }}","bodyContent":"={{ $json.output }}\n\nBest,\nHyrum\nQuarterSmart AI","toRecipients":"={{ $json.email }}","additionalFields":{}},"credentials":{"microsoftOutlookOAuth2Api":{"id":"credential-id","name":"microsoftOutlookOAuth2Api Credential"}},"typeVersion":2},{"id":"4fa1ee74-b8f4-472d-875c-f0a79dd18077","name":"Tag as Interested","type":"n8n-nodes-base.googleSheets","position":[3104,1360],"parameters":{"columns":{"value":{"Email":"={{ $json.email }}","Status":"Interested - Replied"},"schema":[{"id":"Email","type":"string","display":true,"required":false,"displayName":"Email","defaultMatch":true,"canBeUsedToMatch":true},{"id":"Status","type":"string","display":true,"required":false,"displayName":"Status","defaultMatch":false,"canBeUsedToMatch":true}],"mappingMode":"defineBelow","matchingColumns":["Email"]},"options":{},"operation":"appendOrUpdate","sheetName":{"__rl":true,"mode":"name","value":"Sheet1"},"documentId":{"__rl":true,"mode":"id","value":"1bxEOqa0OXL-v6806-Fm9lnsXttsqgX9LGq42QtZWbc8"}},"credentials":{"googleSheetsOAuth2Api":{"id":"credential-id","name":"googleSheetsOAuth2Api Credential"}},"typeVersion":4.7},{"id":"56e0a5c9-aa17-447c-af04-d9a9861f6d38","name":"Check for Reply Logic","type":"n8n-nodes-base.code","position":[2592,1216],"parameters":{"jsCode":"// Placeholder logic: Check if reply was received\n// In production, this would query Microsoft Outlook API\n// to check if the sent email received a reply\n\nconst items = $input.all();\n\nreturn items.map(item => {\n  return {\n    json: {\n      ...item.json,\n      replyReceived: false // Placeholder - set to false for now\n    }\n  };\n});"},"typeVersion":2},{"id":"3e40344b-fa46-4fb2-bb0d-3a2c3b328827","name":"ðŸ“‹ PART 1: Lead Capture","type":"n8n-nodes-base.stickyNote","position":[1888,832],"parameters":{"color":7,"width":552,"height":924,"content":"## ðŸ“‹ PART 1: Lead Capture\n\nCaptures leads through form submission, processes images with AI, and stores contact info in Google Sheets."},"typeVersion":1},{"id":"7f4d954d-93f1-4ff5-bd55-f08449411fec","name":"ðŸ¤– PART 2: AI Outreach","type":"n8n-nodes-base.stickyNote","position":[992,864],"parameters":{"color":7,"width":876,"height":876,"content":"## ðŸ¤– PART 2: AI Outreach\n\nAI analyzes company context, selects relevant automation idea, and generates personalized outreach email automatically."},"typeVersion":1},{"id":"8adcb2bc-382b-418b-81e1-27cfa2c0829f","name":"ðŸ“¬ PART 3: Follow-up System","type":"n8n-nodes-base.stickyNote","position":[2464,832],"parameters":{"color":7,"width":1136,"height":924,"content":"## ðŸ“¬ PART 3: Follow-up System\n\nWaits 48 hours, checks for replies, sends AI-generated follow-up if no response, or tags lead as interested if they replied."},"typeVersion":1},{"id":"6f9daec2-d2e5-4cf2-8b79-aa16450ddddf","name":"ðŸ”„ How It Works","type":"n8n-nodes-base.stickyNote","position":[384,1072],"parameters":{"color":2,"width":500,"height":576,"content":"## ðŸ”„ How It Works\n\n**Step 1:** Lead fills form â†’ Image edited + contact saved\n**Step 2:** AI picks automation idea â†’ Writes personalized email\n**Step 3:** Email sent with calendar link\n**Step 4:** Wait 48 hours\n**Step 5:** Check for reply:\n  â€¢ No reply â†’ AI writes follow-up â†’ Send\n  â€¢ Reply received â†’ Tag as \"Interested\" in sheet\n\n**Result:** Automated lead qualification + nurturing at scale\n\n## ðŸ“– Setup Instructions\n\n1. Add Google Gemini API credentials\n2. Connect Microsoft Outlook account\n3. Connect Google Sheets (create a sheet with columns: Name, Company, Email, Time, Status)\n4. Update calendar booking link in outreach email (currently: https://cal.com/quartersmart/intro)\n5. Customize automation ideas list in the \"ðŸ“š Automation Ideas Library\" node\n6. Update email signatures with your name and company\n7. Test with a sample form submission"},"typeVersion":1},{"id":"fe3e16b9-ac3e-45d8-bbd0-76db29ae64f9","name":"Google Gemini Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatGoogleGemini","position":[1568,1328],"parameters":{"options":{}},"credentials":{"googlePalmApi":{"id":"credential-id","name":"googlePalmApi Credential"}},"typeVersion":1},{"id":"cee171e7-43b1-41df-a68f-c82382ca425a","name":"Check If Reply Received","type":"n8n-nodes-base.if","position":[2816,1216],"parameters":{"options":{},"conditions":{"options":{"leftValue":"","caseSensitive":false,"typeValidation":"loose"},"combinator":"and","conditions":[{"id":"id-1","operator":{"type":"boolean","operation":"false"},"leftValue":"={{ $('Check for Reply Logic').item.json.replyReceived }}","rightValue":"false"}]}},"typeVersion":2.2}],"active":false,"pinData":{},"settings":{"executionOrder":"v1"},"versionId":"bfd155a0-db03-4efd-b034-ccb350be70ab","connections":{"Edit an image":{"main":[[{"node":"Send a message","type":"main","index":0}]]},"Wait 48 Hours":{"main":[[{"node":"Check for Reply Logic","type":"main","index":0}]]},"Parse AI Output":{"main":[[{"node":"Send Personalized Outreach Email","type":"main","index":0}]]},"Check for Reply Logic":{"main":[[{"node":"Check If Reply Received","type":"main","index":0}]]},"Check If Reply Received":{"main":[[{"node":"AI Follow-up Email Writer","type":"main","index":0}],[{"node":"Tag as Interested","type":"main","index":0}]]},"Automation Ideas Library":{"main":[[{"node":"AI Sales Agent - Idea Picker & Email Writer","type":"main","index":0}]]},"Google Gemini Chat Model":{"ai_languageModel":[[{"node":"AI Sales Agent - Idea Picker & Email Writer","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Sales Agent - Idea Picker & Email Writer","type":"ai_outputParser","index":0}]]},"AI Follow-up Email Writer":{"main":[[{"node":"Send Follow-up Email","type":"main","index":0}]]},"Google Gemini Chat Model1":{"ai_languageModel":[[{"node":"AI Follow-up Email Writer","type":"ai_languageModel","index":0}]]},"Property Photo Upload Form":{"main":[[{"node":"Edit an image","type":"main","index":0},{"node":"Append or update row in sheet","type":"main","index":0},{"node":"Automation Ideas Library","type":"main","index":0}]]},"Send Personalized Outreach Email":{"main":[[{"node":"Wait 48 Hours","type":"main","index":0}]]},"AI Sales Agent - Idea Picker & Email Writer":{"main":[[{"node":"Parse AI Output","type":"main","index":0}]]}}}